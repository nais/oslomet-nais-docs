<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
     <link rel="canonical" href="https://nais.io/oslomet-nais-docs/security/auth/maskinporten/client/"> 
    
    
    <link rel="icon" type="image/x-icon" href="../../../../assets/logo.svg">
    

    
    <title>Client - NAIS</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link href="../../../../css/cinder.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="../../../../css/highlight.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <header class="navbar fixed-top navbar-expand-md navbar-dark bg-dark">
    <nav class="container-fluid" aria-label="toolbar">
        
        

            
            <a class="navbar-brand" href="../../../..">
                <img alt="logo" height="36" src="../../../../assets/logo.svg" class="align-items-center"/>
                 NAIS platform documentation 
            </a>
            

        

        
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle toolbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        

        
        <div class="navbar-collapse collapse" id="navbarSupportedContent">
            <ul class="navbar-nav flex-grow-1 justify-content-end">
                
                    
                    <li class="nav-item d-grid m-1">
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal" type="button">
                            <span class="fas fa-search"></span> Search
                        </button>
                    </li> 
                    
                

                
                    

                    
                    
                    <li class="nav-item d-grid m-1">
                        <a href="../" rel="prev" role="button" class="btn btn-secondary">
                            <span class="fas fa-arrow-left"></span> Previous page
                        </a>
                    </li>
                    

                    
                    
                    <li class="nav-item d-grid m-1">
                        <a href="../scopes/" rel="next" role="button" class="btn btn-secondary">
                            Next page <span class="fas fa-arrow-right"></span>
                        </a>
                    </li>
                    

                    
                

                
                
                    
                        <li class="nav-item my-auto">
                            <a href="https://github.com/nais/oslomet-nais-docs/" class="btn nav-link">
                                
                                    <span class="fab fa-github"></span> NAIS on Github                                    
                                
                            </a>
                        </li>
                    
                
            </ul>
        </div>
    </nav>
</header>

    <div class="container-fluid">
        <div class="row">
            
            
                <aside class="col-md-6 col-lg-3 col-xl-2 order-lg-1" aria-label="primary">


<nav class="mb-5 sticky-top sidebar-sticky" aria-labelledby="nav-label">
    <span id="nav-label" class="fs-4">Navigation:</span>
    <ul class="list-unstyled py-2 mt-3 sidebar-sticky-overflow border-top border-bottom">
        

            

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 bg-grey rounded-top" href='



    

    ../../../..

' aria-current="location"><strong>NAIS</strong></a>
            <ul class="list-unstyled ps-2 border-start border-bottom py-1">
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../../../..">Introduction to NAIS</a>
        
    </li>

                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../basics/access/

'> Getting started</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../clusters/gcp/

'> Clusters</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../nais-application/example/

'> NAIS Application</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../naisjob/

'> Naisjob</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../deployment/

'> Deploy</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    

    



    

    ../../../../observability/alerts/



'> Observability</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../persistence/responsibilities/

'> Persistence</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 bg-grey rounded-top" href='



    

    

    



    

    ../../



' aria-current="location"><strong>Security</strong></a>
            <ul class="list-unstyled ps-2 border-start border-bottom py-1">
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 bg-grey rounded-top" href='



    

    ../../

' aria-current="location"><strong>Auth</strong></a>
            <ul class="list-unstyled ps-2 border-start border-bottom py-1">
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../../">Auth Overview</a>
        
    </li>

                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../azure-ad/

'> Azure AD</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../idporten/

'> ID-porten</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 bg-grey rounded-top" href='



    

    ../

' aria-current="location"><strong>Maskinporten</strong></a>
            <ul class="list-unstyled ps-2 border-start border-bottom py-1">
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../">Intro</a>
        
    </li>

                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 bg-warning rounded" href="./" aria-current="page"><strong>Client</strong></a>
        
    </li>

                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../scopes/">Scopes</a>
        
    </li>

                 
                
            </ul>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../../tokenx/">TokenX</a>
        
    </li>

                 
                
            </ul>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../secrets/

'> Secrets</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../../../antivirus/">Anti-virus Scanning</a>
        
    </li>

                 
                
            </ul>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../addons/leader-election/

'> Addons</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../legacy/sunset/

'> Legacy</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../appendix/zero-trust/

'> Appendix</a>
        
    </li>


                 
                
            
                    

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href="../../../../support/">Support</a>
        
    </li>

                 
                
            </ul>
        
    </li>



        

            

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../device/

'> naisdevice</a>
        
    </li>



        

            

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../cli/

'> nais-cli</a>
        
    </li>



        

            

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../legal/roles-responsibilities/

'> Laws and regulations</a>
        
    </li>



        

            

    

    <li class="mx-1">
        
            <a class="link-dark link-hover-underline d-block p-1 rounded" href='



    

    ../../../../theme-dev/

'> Theme Dev</a>
        
    </li>



        
    </ul>
</nav>


</aside>
                <aside class="col-md-6 col-lg-3 col-xl-3 order-lg-3" aria-label="secondary"><nav class="mb-5 sticky-top sidebar-sticky " aria-labelledby="toc-label">
    <span id="toc-label" class="fs-4">On this page:</span>
    <ul class="list-unstyled py-2 mt-3 sidebar-sticky-overflow border-top border-bottom">
        
        <li class="m-1">
            <strong><a class="link-dark link-hover-underline d-block" href="#client">Client</a></strong>
            
            <ul class="ps-3">
                
                <li class="m-1">
                    <a class="link-dark link-hover-underline d-block" href="#getting-started">Getting Started</a>
                    
                    <ul class="ps-3">
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#access-policies">Access Policies</a>
                        </li>
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#spec">Spec</a>
                        </li>
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#configuration">Configuration</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="m-1">
                    <a class="link-dark link-hover-underline d-block" href="#usage">Usage</a>
                    
                    <ul class="ps-3">
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#runtime-variables-and-credentials">Runtime Variables and Credentials</a>
                        </li>
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#consuming-an-api">Consuming an API</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="m-1">
                    <a class="link-dark link-hover-underline d-block" href="#legacy">Legacy</a>
                    
                    <ul class="ps-3">
                        
                        <li class="m-1">
                            <a class="link-dark link-hover-underline d-block" href="#migration-guide-to-keep-existing-maskinporten-client-nais-application-only">Migration guide to keep existing Maskinporten client (NAIS application only)</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="m-1">
                    <a class="link-dark link-hover-underline d-block" href="#permanently-deleting-a-client">Permanently deleting a client</a>
                    
                </li>
                
            </ul>
            
        </li>    
        
    </ul>
</nav></aside>
                <main class="col-md-12 col-lg-6 col-xl-7 order-lg-2" aria-label="main content">
<div class="mb-2">
    <a href="https://github.com/nais/oslomet-nais-docs/edit/main/docs/security/auth/maskinporten/client.md">
        <span class="fas fa-edit"></span> Edit this page
    </a>
</div>


<h1 id="client">Client<a class="headerlink" href="#client" title="Permanent link">§</a></h1>
<p>The NAIS platform provides support for simple declarative provisioning of a <em>client</em> that your application may use to integrate with Maskinporten, and in turn consume services and APIs served by external agencies.</p>
<p>The client allows your application to leverage Maskinporten for authentication and authorization when performing service-to-service requests to external agencies.
To achieve this, your application must:</p>
<ul>
<li>implement <a href="https://docs.digdir.no/maskinporten_protocol_jwtgrant.html">JWT grants</a></li>
<li>request tokens from <a href="https://docs.digdir.no/maskinporten_protocol_token.html">the <code>/token</code>-endpoint</a> with the above JWT grants</li>
</ul>
<p>When a client requests a token from Maskinporten:</p>
<ul>
<li>Maskinporten validates the validity of the JWT and its signature (<a href="#runtime-variables-and-credentials">Runtime JWK Secret</a> used to sign the JWT).</li>
<li>If the client has access to the requested list of <code>scopes</code>, an <code>access_token</code> will be returned to the client. The token can be used for authentication to the intended external service.</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Make sure that the relevant service providers have pre-registered <strong>NAV</strong>'s organization (number: <code>889640782</code>) as a valid consumer of any scopes that you define. Provisioning of client will fail otherwise.</p>
<p>NAV´s <code>pre-registered</code> scopes can be found with proper access rights in <a href="https://selvbetjening-samarbeid-ver2.difi.no/auth/login">Digdir selvbetjening</a>.</p>
</div>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">§</a></h2>
<h3 id="access-policies">Access Policies<a class="headerlink" href="#access-policies" title="Permanent link">§</a></h3>
<p>Maskinporten is a third-party service outside of our clusters, which is not reachable by default like most third-party services.</p>
<h4 id="google-cloud-platform-gcp">Google Cloud Platform (GCP)<a class="headerlink" href="#google-cloud-platform-gcp" title="Permanent link">§</a></h4>
<p>The following <a href="../../../../nais-application/access-policy/#external-services">outbound external hosts</a> are automatically added when enabling this feature:</p>
<ul>
<li><code>ver2.maskinporten.no</code> in development</li>
<li><code>maskinporten.no</code> in production</li>
</ul>
<p>You do not need to specify these explicitly.</p>
<h4 id="on-premises">On-premises<a class="headerlink" href="#on-premises" title="Permanent link">§</a></h4>
<p>You must enable and use <a href="../../../../nais-application/application/#webproxy"><code>webproxy</code></a> for external communication.</p>
<h3 id="spec">Spec<a class="headerlink" href="#spec" title="Permanent link">§</a></h3>
<p>See the <a href="../../../../nais-application/application/#maskinporten">NAIS manifest</a>.</p>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">§</a></h3>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">nais.yaml</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">maskinporten</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span>
<span class="w">    </span><span class="nt">scopes</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">consumes</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;skatt:some.scope&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nav:some/other/scope&quot;</span><span class="w"></span>

<span class="w">  </span><span class="c1"># required for on-premises only</span><span class="w"></span>
<span class="w">  </span><span class="nt">webproxy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</code></pre></div>
</div>
</div>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">§</a></h2>
<h3 id="runtime-variables-and-credentials">Runtime Variables and Credentials<a class="headerlink" href="#runtime-variables-and-credentials" title="Permanent link">§</a></h3>
<p>The following environment variables and files (under the directory <code>/var/run/secrets/nais.io/maskinporten</code>) are available at runtime:</p>
<hr />
<h4 id="maskinporten_client_id"><code>MASKINPORTEN_CLIENT_ID</code><a class="headerlink" href="#maskinporten_client_id" title="Permanent link">§</a></h4>
<details class="note" open="open">
<summary>Note</summary>
<p>Maskinporten client ID. Unique ID for the application in Maskinporten.</p>
<p>Example value: <code>e89006c5-7193-4ca3-8e26-d0990d9d981f</code></p>
</details>
<hr />
<h4 id="maskinporten_scopes"><code>MASKINPORTEN_SCOPES</code><a class="headerlink" href="#maskinporten_scopes" title="Permanent link">§</a></h4>
<details class="note" open="open">
<summary>Note</summary>
<p>The scopes registered for the client at Maskinporten as a whitepace-separated string. See <a href="https://docs.digdir.no/maskinporten_protocol_token.html">JWT grants</a> for more information.</p>
<p>Example value: <code>nav:first/scope nav:another/scope</code></p>
</details>
<hr />
<h4 id="maskinporten_well_known_url"><code>MASKINPORTEN_WELL_KNOWN_URL</code><a class="headerlink" href="#maskinporten_well_known_url" title="Permanent link">§</a></h4>
<details class="note" open="open">
<summary>Note</summary>
<p>The well-known URL for the OIDC metadata discovery document for Maskinporten. </p>
<p>Example value: <code>https://ver2.maskinporten.no/.well-known/oauth-authorization-server</code></p>
</details>
<hr />
<h4 id="maskinporten_client_jwk"><code>MASKINPORTEN_CLIENT_JWK</code><a class="headerlink" href="#maskinporten_client_jwk" title="Permanent link">§</a></h4>
<details class="note" open="open">
<summary>Note</summary>
<p>Private JWK containing the private RSA key for creating signed JWTs when using the <a href="https://docs.digdir.no/maskinporten_protocol_token.html">JWT grants</a>.</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;use&quot;</span><span class="o">:</span> <span class="s2">&quot;sig&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kty&quot;</span><span class="o">:</span> <span class="s2">&quot;RSA&quot;</span><span class="p">,</span>
  <span class="s2">&quot;kid&quot;</span><span class="o">:</span> <span class="s2">&quot;jXDxKRE6a4jogcc4HgkDq3uVgQ0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;alg&quot;</span><span class="o">:</span> <span class="s2">&quot;RS256&quot;</span><span class="p">,</span>
  <span class="s2">&quot;n&quot;</span><span class="o">:</span> <span class="s2">&quot;xQ3chFsz...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;e&quot;</span><span class="o">:</span> <span class="s2">&quot;AQAB&quot;</span><span class="p">,</span>
  <span class="s2">&quot;d&quot;</span><span class="o">:</span> <span class="s2">&quot;C0BVXQFQ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;p&quot;</span><span class="o">:</span> <span class="s2">&quot;9TGEF_Vk...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;q&quot;</span><span class="o">:</span> <span class="s2">&quot;zb0yTkgqO...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;dp&quot;</span><span class="o">:</span> <span class="s2">&quot;7YcKcCtJ...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;dq&quot;</span><span class="o">:</span> <span class="s2">&quot;sXxLHp9A...&quot;</span><span class="p">,</span>
  <span class="s2">&quot;qi&quot;</span><span class="o">:</span> <span class="s2">&quot;QCW5VQjO...&quot;</span>
<span class="p">}</span>
</code></pre></div>
</details>
<h3 id="consuming-an-api">Consuming an API<a class="headerlink" href="#consuming-an-api" title="Permanent link">§</a></h3>
<p>Refer to the <a href="https://docs.digdir.no/maskinporten_guide_apikonsument.html">documentation at DigDir</a>.</p>
<p>You may skip any step involving client registration as this is automatically handled when <a href="#configuration">enabling this feature</a>.</p>
<h2 id="legacy">Legacy<a class="headerlink" href="#legacy" title="Permanent link">§</a></h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This section only applies if you have an existing client registered at the <a href="https://github.com/navikt/nav-maskinporten">IaC repository</a></p>
</div>
<h3 id="migration-guide-to-keep-existing-maskinporten-client-nais-application-only">Migration guide to keep existing Maskinporten client (NAIS application only)<a class="headerlink" href="#migration-guide-to-keep-existing-maskinporten-client-nais-application-only" title="Permanent link">§</a></h3>
<p>The following describes the steps needed to migrate a client registered in <a href="https://github.com/navikt/nav-maskinporten">IaC repository</a>.</p>
<h4 id="step-1-update-your-client-description-in-the-iac-repository">Step 1 - Update your client description in the IaC repository<a class="headerlink" href="#step-1-update-your-client-description-in-the-iac-repository" title="Permanent link">§</a></h4>
<ul>
<li>Ensure the <strong><code>description</code></strong> of the client registered in the <code>IaC</code> repository follows the naming scheme:</li>
</ul>
<div class="codehilite"><pre><span></span><code>&lt;cluster&gt;:&lt;metadata.namespace&gt;:&lt;metadata.name&gt;
</code></pre></div>
<h4 id="step-3-deploy-your-nais-application-with-maskinporten-provisioning-enabled">Step 3 - Deploy your NAIS application with Maskinporten provisioning enabled<a class="headerlink" href="#step-3-deploy-your-nais-application-with-maskinporten-provisioning-enabled" title="Permanent link">§</a></h4>
<ul>
<li>See <a href="#consumes-configuration">configuration</a>.</li>
</ul>
<h4 id="step-4-delete-your-application-from-the-iac-repository">Step 4 - Delete your application from the IaC repository<a class="headerlink" href="#step-4-delete-your-application-from-the-iac-repository" title="Permanent link">§</a></h4>
<ul>
<li>Verify that everything works after the migration</li>
<li>Delete the application from the <a href="https://github.com/navikt/nav-maskinporten">IaC repository</a> in order to maintain a single source of truth.</li>
</ul>
<h2 id="permanently-deleting-a-client">Permanently deleting a client<a class="headerlink" href="#permanently-deleting-a-client" title="Permanent link">§</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Permanent deletes are irreversible. Only do this if you are certain that you wish to completely remove the client from DigDir
and deactivates exposed scopes and granted access for consumers wil be removed.</p>
<p>When a <code>MaskinportenClient</code> resource gets deleted from a Kubernetes cluster, the client will not be deleted from DigDir.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The <code>Application</code> resource owns the <code>MaskinportenClient</code> resource, deletion of the former will thus trigger a deletion of the latter.</p>
<p>If the <code>MaskinportenClient</code> resource is recreated, the client will thus retain the same client ID.</p>
</div>
<p>If you want to completely delete the client from DigDir, you must add the following annotation to the <code>MaskinportenClient</code> resource:</p>
<div class="codehilite"><pre><span></span><code>kubectl annotate maskinportenclient &lt;app&gt; digdir.nais.io/delete<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>When this annotation is in place, deleting the <code>MaskinportenClient</code> resource from Kubernetes will trigger removal of the client and inactivating of registered scopes from DigDir.</p></main>
            
            
        </div>
    </div>

    

        <footer class="py-3 mt-3 border-top">
    

        
        <p class="text-center">
            
        </p>
        <p class="text-center">
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> and modified <a href="https://sourcefoundry.org/cinder/">Cinder theme</a></small>
        </p>
        

        

    
</footer>


    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../../../js/bootstrap.bundle.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.0/build/highlight.min.js"></script>
        

    <script>hljs.highlightAll();</script>
    

    <script>var base_url = "../../../.."</script>

    

    <script src="../../../../js/base.js"></script>
    <script src="../../../../search/main.js"></script>

    <div class="modal fade" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="searchModalLabel">Search documentation modal</span>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close search documentation modal"></button>
            </div>
            <div class="modal-header">
                <form autocomplete="off" class="flex-fill">
                    <div class="form-group">
                        <label class="form-label" id="search-input-label" for="mkdocs-search-query">Search for:</label>
                        <input type="search" class="form-control" placeholder="Type to start searching ..." id="mkdocs-search-query"
                            title="Type search term here" aria-labelledby="search-input-label">

                        <span class="form-text" role="status" id="mkdocs-search-results-info">
                            
                        </span>
                    </div>
                </form>
            </div>
            <div class="modal-body">
                <div aria-label="Search results" id="mkdocs-search-results">
                    
                </div>
            </div>
            <div class="modal-footer"></div>
        </div>
    </div>
</div>
    <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>

